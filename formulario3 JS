document.addEventListener('DOMContentLoaded', function() {
    const loginForm = document.getElementById('loginForm');
    const emailInput = document.getElementById('email');
    const passwordInput = document.getElementById('password');
    const emailError = document.getElementById('emailError');
    const passwordError = document.getElementById('passwordError');
    const successMessage = document.getElementById('successMessage');

    // Função para validar e-mail
    function validateEmail(email) {
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        return emailRegex.test(email);
    }

    // Função para validar senha
    function validatePassword(password) {
        return password.length >= 6;
    }

    // Função para mostrar erro
    function showError(input, errorElement, message) {
        input.classList.add('error');
        errorElement.textContent = message;
    }

    // Função para limpar erro
    function clearError(input, errorElement) {
        input.classList.remove('error');
        errorElement.textContent = '';
    }

    // Validação em tempo real
    emailInput.addEventListener('input', function() {
        if (validateEmail(this.value)) {
            clearError(this, emailError);
        }
    });

    passwordInput.addEventListener('input', function() {
        if (validatePassword(this.value)) {
            clearError(this, passwordError);
        }
    });

    // Validação no submit
    loginForm.addEventListener('submit', function(e) {
        e.preventDefault();
        
        let isValid = true;
        const email = emailInput.value.trim();
        const password = passwordInput.value.trim();

        // Validar e-mail
        if (!email) {
            showError(emailInput, emailError, 'E-mail é obrigatório');
            isValid = false;
        } else if (!validateEmail(email)) {
            showError(emailInput, emailError, 'Digite um e-mail válido');
            isValid = false;
        } else {
            clearError(emailInput, emailError);
        }

        // Validar senha
        if (!password) {
            showError(passwordInput, passwordError, 'Senha é obrigatória');
            isValid = false;
        } else if (!validatePassword(password)) {
            showError(passwordInput, passwordError, 'Senha deve ter pelo menos 6 caracteres');
            isValid = false;
        } else {
            clearError(passwordInput, passwordError);
        }

        // Se tudo estiver válido
        if (isValid) {
            // Simular envio para o servidor
            simulateLogin();
        }
    });

    // Função para simular login
    function simulateLogin() {
        // Mostrar mensagem de sucesso
        loginForm.style.display = 'none';
        successMessage.style.display = 'block';

        // Simular redirecionamento (em um caso real, isso seria feito pelo servidor)
        setTimeout(() => {
            alert('Login realizado com sucesso! Redirecionando...');
            // window.location.href = '/dashboard'; // Redirecionamento real
        }, 2000);
    }

    // Validação adicional para melhor UX
    emailInput.addEventListener('blur', function() {
        const email = this.value.trim();
        if (email && !validateEmail(email)) {
            showError(this, emailError, 'Digite um e-mail válido');
        }
    });

    passwordInput.addEventListener('blur', function() {
        const password = this.value.trim();
        if (password && !validatePassword(password)) {
            showError(this, passwordError, 'Senha deve ter pelo menos 6 caracteres');
        }
    });
});
